---
/**
 * HowToSchema - Generates HowTo JSON-LD structured data for step-by-step guides
 * Enables rich snippets with step carousels in Google Search
 */

export interface HowToStep {
  name: string;
  text: string;
}

export interface Props {
  name: string;
  description: string;
  steps: HowToStep[];
  totalTime?: string; // ISO 8601 duration format, e.g., "PT10M" for 10 minutes
  language?: 'en-CA' | 'fr-CA';
}

const { name, description, steps, totalTime, language = 'en-CA' } = Astro.props;

const siteUrl = 'https://fizzpromocode.ca';

const howToSchema = {
  '@context': 'https://schema.org',
  '@type': 'HowTo',
  name: name,
  description: description,
  inLanguage: language,
  ...(totalTime && { totalTime: totalTime }),
  step: steps.map((step, index) => ({
    '@type': 'HowToStep',
    position: index + 1,
    name: step.name,
    text: step.text,
  })),
  publisher: {
    '@type': 'Organization',
    name: 'Fizz Promo Code',
    url: siteUrl,
  },
};
---

<script type="application/ld+json" set:html={JSON.stringify(howToSchema)} is:inline />
